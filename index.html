<!DOCTYPE html>
<html>
<head>

<title>timer timer</title>
<link rel="stylesheet" href="index.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


</head>

<body>

<div id="content">
    <h1> POMODORO TIMER</h1>
<div id="input">

    <input type="number" id="minutesInput" min="0" max="59">
    
    <input type="number" id="secondsInput" min="0" max="59">

    <button id="setTime"> Set Time </button>
</div>


<div id="timer">00:00</div>
<div id="buttons">
<button id="buttonTimer"> START </button>
<button id="stopTimer"> STOP</button>
<button id="resetTimer"> RESET</button>
</div>
<h2 style="text-align: center;">To do List:</h2>
<form id="todoForm">
    <input type="text" id="todo" placeholder="Enter List">

    <input type="submit" value="Add List" id="addList"></input>
</form>

<div id="toDoListContainer">
    
    <!-- to do list -->
</div>

<audio id ="alarm">
    <source src="alarm.mp3" type="audio/mp3">
    <source src="alarm.wav" type="audio/wav">

</audio>


</div>

<script>

const minutesInput = document.getElementById('minutesInput');
const secondsInput = document.getElementById('secondsInput');


let timer = 0;
let timerInterval;
let isRunning = false;
let alarm = document.getElementById("alarm");
const time = document.getElementById('timer');
const startBTN = document.getElementById('buttonTimer');
const stopBTN = document.getElementById('stopTimer');
const setTime = document.getElementById('setTime');
const resetTimer = document.getElementById('resetTimer');


let origTimer = 0;

const setTimer = () =>{
    let minutes = parseInt(minutesInput.value) || 0; //converts to int
    let seconds = parseInt(secondsInput.value) || 0;
    timer = (minutes * 60) + seconds;
    origTimer = timer;
    updateTimer();

}

const updateTimer = () => {
    const min = Math.floor(timer / 60);
    const sec = timer % 60;

    time.innerHTML = `${min.toString().padStart(2, "0")}:${sec.toString().padStart(2, "0")}`;
};

const startTimer = () => {
    isRunning = true;
    timerInterval = setInterval(() => {
         timer--;
         updateTimer();

         if (timer == 0){
            clearInterval(timerInterval);
            alarm.play();
            alert("Time's up!");
            isRunning = false;
            timer = origTimer;
            
            updateTimer();
         }
    }, 1000);
}

const stopTimer = () => {
    clearInterval(timerInterval);
    alarm.pause()
    timer = origTimer;
    updateTimer();
    
}

const resetTime = () =>{
    clearInterval(timerInterval);
    alarm.pause();
    timer = 0;
    origTimer = 0;
    updateTimer();
    minutesInput.value = '';
    secondsInput.value = '';
}


startBTN.addEventListener("click", startTimer);
stopBTN.addEventListener("click", stopTimer);
setTime.addEventListener("click", setTimer);
resetTimer.addEventListener("click", resetTime);


//TO DO LIST

const toDoListContainer = document.getElementById('toDoListContainer');
const addListButton = document.getElementById('addList');
const todoInput = document.getElementById('todo');
const todoForm = document.getElementById('todoForm');

let i = 0;

const addList = (e) =>{
    e.preventDefault();

     const text = todoInput.value.trim();
    if (text == ''){
        return;
    }
    i++;
    
    

    if (i != 0){
        toDoListContainer.style.display = 'block';
    }
    
    
    const listCont = document.createElement('div');
    listCont.className = 'list';
    const title = document.createElement('span');
    
    const deleteButton = document.createElement('button');
    deleteButton.className = 'deleteBut';
    deleteButton.textContent = 'x';

    deleteButton.addEventListener("click", () => {
        listCont.remove();
        i--;

        if(i == 0){
            toDoListContainer.style.display = 'none';
        }
    })
    
    
    title.textContent = text;
    
    listCont.appendChild(title);
    listCont.appendChild(deleteButton);
    toDoListContainer.appendChild(listCont);

    todoInput.value = '';
    
}


todoForm.addEventListener("submit", addList);
addListButton.addEventListener("click", addList);

</script>


</body>




</html>